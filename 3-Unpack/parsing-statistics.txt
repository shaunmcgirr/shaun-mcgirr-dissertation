# Dimensions of parsed objects (add the creation of these statistics to the script)

Name                                          Length  Width   MB
Moskva_notifications_parsed_2015-06-13.rda    687280      9   54
Moskva_contracts_parsed_2015-06-13.rda       2137100     17   73

# Moving parallelization
inside process_batch_key_value prescheduled=F fails
inside process_batch_key_value prescheduled=T speeds up, but CPU underutilized
- adding mc to find_documents_in_this_batch (pre=F) cuts down to 2 mins!
- making everything except output_document_key_value mcapply cuts to 1.1 mins
- adding that in torpedoes (conflict), actual parsing isn’t slow it’s loading
- unfortunately it has spawned many many rsessions…may need the kill option? (seems ok)
- now need to check it isn’t actually messing up the data…yes all the actual data missing

Adygeja
- mc main/mc output/mc find 1.72 mins (no data)
- lapply main/mc output/mc find 1.7 mins (no data)
- mc main/mc output/lapply find 2.1 mins (has data)
- mc main/lapply output/mc find 1.2 mins (no data, so it’s mc find that is culprit)
- apply main/mc output/lapply find 3.3 mins (has data)
- mc main/lapply output/lapply find 2.0 mins

Leningradskaja
- mc main/lapply output 8.9-9.3 mins (clean test 9.8 mins)
- lapply main/mc output 13 mins
- mc main/mc output 9-10 mins (clean test 9.2 mins)


Adygeja
4.2 mins with batch_size = 3
4.6 mins with batch_size = 2
4.4 mins with batch_size = 6
4.4 mins with batch_size = 1
4.2 mins with batch_size = 4


# Timings of parallel parser on Mac desktop
Altaj_Resp (0.9GB): 4.2 top-level MC presched=F, 3.6 inside MC presched=T)
Adygeja_Resp (1.4GB): ~ 2.5 mins
Burjatija_Resp (3.6GB): ~ 6:45 mins top-level MC, 
Leningradskaja_obl (5.1GB): 9:30
Irkutskaja_obl (9.3GB): 19.26
Krasnojarskij_kraj (14.0GB): 29 mins
Moskovskaja_obl (22.8GB): 45 mins
Sankt-Peterburg (29.6GB): 1.3 hrs
Krasnodarskij_kraj (30.0GB): 1.01 hours
Moskva (63.8GB): 2.5 hours (contracts 2, notifications 0.5 but maybe interrupted, parallel 2 hrs)
  contracts: same as below!
  notifications: same as below!

before-leaving directory, Moscow files
contracts: 88,091,654 obs of 4 vars
notifications: 14,671,826 obs

Grain of output tables (maybe add new script "generate tables")
Notification-Lot vs Notification-Lot-Product
Problem is that parser goes by search field, not by order in document, so need to restrict attention to single-lot/single-product auctions as before (but worth sizing the problem)

Measures:
1) Procedure type
2) Product flags (gas, printers, etc)
3) Difference between notification and contract price

Ideas
Unofficial email addresses as "capacity"?

Counts and amounts (good complex one is 0376100001911000004, many products)
http://zakupki.gov.ru/pgz/public/action/orders/info/common_info/show?notificationId=204952
- lots per notification
- products per lot


# Timings from batch processing

[1] "Processing contracts from Altaj_Resp took"
Time difference of 1.06983558336894 mins
[1] "Processing notifications from Altaj_Resp took"
Time difference of 26.9328088760376 secs
[1] "Processing Altaj_Resp took"
Time difference of 1.51874024868011 mins
[1] "Processing contracts from Altajskij_kraj took"
Time difference of 13.9668044010798 mins
[1] "Processing notifications from Altajskij_kraj took"
Time difference of 2.16747630039851 mins
[1] "Processing Altajskij_kraj took"
Time difference of 16.1343026161194 mins
[1] "Processing contracts from Amurskaja_obl took"
Time difference of 6.69090261856715 mins
[1] "Processing notifications from Amurskaja_obl took"
Time difference of 1.72228188514709 mins
[1] "Processing Amurskaja_obl took"
Time difference of 8.41320428450902 mins
[1] "Processing contracts from Arkhangelskaja_obl took"
Time difference of 9.6717099348704 mins
[1] "Processing notifications from Arkhangelskaja_obl took"
Time difference of 2.51892473300298 mins
[1] "Processing Arkhangelskaja_obl took"
Time difference of 12.1906630357107 mins
[1] "Processing contracts from Astrakhanskaja_obl took"
Time difference of 6.81305036942164 mins
[1] "Processing notifications from Astrakhanskaja_obl took"
Time difference of 1.49253714879354 mins
[1] "Processing Astrakhanskaja_obl took"
Time difference of 8.30560895204544 mins
[1] "Processing contracts from Bajkonur_g took"
Time difference of 20.2789559364319 secs
[1] "Processing notifications from Bajkonur_g took"
Time difference of 9.91507601737976 secs
[1] "Processing Bajkonur_g took"
Time difference of 30.1951820850372 secs


